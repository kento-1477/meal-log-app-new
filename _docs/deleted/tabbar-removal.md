# TabBar コンポーネント削除

**削除日**: 2025-10-23

## 削除対象

- コンポーネント: `apps/mobile/src/features/dashboard/components/TabBar.tsx`
- インポート: `apps/mobile/app/(tabs)/dashboard.tsx` からの参照削除
- 状態管理: `activeTab` useState削除
- UI要素: 「カロリー」「主栄養素」タブ切り替えボタン

## 削除理由

### ユーザビリティ上の問題
1. **不要な操作**: タブをタップしないと全情報が見えない
   - カロリーチャートを見るには「カロリー」タブをタップ
   - マクロ内訳を見るには「主栄養素」タブをタップ
   - 両方の情報を見るには2回のタップが必要

2. **情報の隠蔽**: デフォルトでは片方の情報しか表示されない
   - ユーザーは「主栄養素タブがある」ことに気づかない可能性
   - 重要な情報へのアクセスに障壁

3. **認知負荷**: どちらのタブを選ぶべきか判断が必要
   - 「今知りたい情報はどちらのタブ？」と考える必要
   - 不要な意思決定

### デザイン上の問題
- 画面の垂直スペースを消費
- タブ切り替えアニメーションによる認知的負担
- モバイルでは全情報を一覧表示する方が自然

## 影響範囲

### UI/UX
- **削除される機能**:
  - タブ切り替えボタン
  - タブ状態管理（activeTab）
  - タブによる条件付きレンダリング

- **変更される表示**:
  - カロリーチャートと時間帯別バランスが常に表示
  - マクロリングが常に表示
  - スクロールで全情報にアクセス

### コード
- 影響を受けるファイル:
  - `apps/mobile/app/(tabs)/dashboard.tsx`
    - `activeTab` state削除
    - `setActiveTab` 削除
    - タブによる条件分岐削除
    - TabBarインポート削除

- 削除されたコード:
```tsx
// 削除前
const [activeTab, setActiveTab] = useState<TabKey>('calories');

<TabBar activeTab={activeTab} onChange={setActiveTab} />

{activeTab === 'calories' ? (
  <View style={styles.section}>
    <CalorieLineChart ... />
    <MealPeriodBreakdown ... />
  </View>
) : (
  <RemainingRings ... />
)}
```

```tsx
// 削除後
<View style={styles.section}>
  <CalorieLineChart ... />
  <MealPeriodBreakdown ... />
</View>
```

## 代替機能

### 情報へのアクセス
| 削除された機能 | 代替手段 |
|--------------|---------|
| タブ切り替えでカロリー表示 | 常に表示（スクロール不要） |
| タブ切り替えでマクロ表示 | 常に表示（リングを上部に移動） |

### ナビゲーション
- タブ切り替えの代わりにスクロール
- 全情報が一画面に集約
- 視線を移動するだけで全体把握が可能

## 再発防止

### 設計原則
1. **情報の可視性**: 重要な情報は隠さない
2. **操作の最小化**: 不要な操作（タップ、スワイプ）を要求しない
3. **スクロールの活用**: モバイルではスクロールが自然な操作

### レビュープロセス
- 新規タブUI追加時は、「本当にタブが必要か？」を問う
- 全情報を一覧表示できないか検討
- ユーザビリティテストで操作回数を計測

### タブが適切なケース
- 情報量が多すぎてスクロールが長くなる場合
- 異なるコンテキストの情報（例: 「履歴」vs「統計」）
- 排他的な操作（例: 「編集」vs「プレビュー」）

## 備考

- TabBarコンポーネントファイル自体は削除していない
  - 他の画面で使用される可能性を考慮
  - 将来的に必要になった場合の復元容易性を担保
- タブ削除により、ダッシュボードのスクロール量は若干増加したが、情報へのアクセス性は向上
