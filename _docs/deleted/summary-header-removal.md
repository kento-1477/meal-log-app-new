# SummaryHeader コンポーネント削除

**削除日**: 2025-10-23

## 削除対象

- コンポーネント: `apps/mobile/src/features/dashboard/components/SummaryHeader.tsx`
- インポート: `apps/mobile/app/(tabs)/dashboard.tsx` からの参照削除
- 画面要素: 「残り（今日）」「摂取量（期間合計）」セクション

## 削除理由

### ユーザビリティ上の問題
1. **情報の重複**: パーセンテージリングと同じ情報を別形式で表示していた
   - 「残り 673 kcal」とリング「69%」は同じ情報
   - 画面スペースの無駄遣い

2. **視覚的優先順位の逆転**: 最も重要な指標（達成率）が画面下部にあり、サマリーが上部を占有
   - ユーザーの視線が重要でない情報に向く
   - スクロールしないと達成率が見えない

3. **認知負荷**: 2つの異なる表現形式（数値 vs パーセンテージ）を処理する必要がある
   - ユーザーは「残り 673 kcal」と「69%」の関係性を頭の中で変換する必要があった

### 技術的理由
- レイアウト簡素化により保守性向上
- コンポーネント数削減によるバンドルサイズ削減

## 影響範囲

### UI/UX
- **削除される情報**:
  - 残りカロリー（数値）: kcal 673
  - 残りマクロ栄養素（数値）: P 45.5g、F 24.4g、C 69.6g
  - 期間合計摂取量: kcal 1528、P 84.5g、F 45.7g、C 190.4g

- **代替表示**:
  - リング下部の「残り xxx kcal」テキストで代替
  - パーセンテージ表示で視覚的に把握可能
  - 比較カードで期間合計は確認可能

### コード
- 影響を受けるファイル: 
  - `apps/mobile/app/(tabs)/dashboard.tsx` - インポート削除、JSX削除
  - `apps/mobile/src/features/dashboard/components/SummaryHeader.tsx` - **ファイル自体は残存**

- 依存関係:
  - `FormattedMacros` 型は引き続き使用される
  - `DashboardViewModel` の `header.remaining` と `header.totals` は他のロジックで使用される可能性があるため保持

## 代替機能

### 情報へのアクセス
| 削除された情報 | 代替手段 |
|--------------|---------|
| 残りカロリー | リング下部の「xxx kcal 残り」テキスト |
| 残りマクロ栄養素 | 各マクロリングの下部テキスト |
| 期間合計摂取量 | 比較カード、またはチャート下部のデータ |

### 実装パターン
```tsx
// 変更前
<SummaryHeader remaining={data.header.remaining} totals={data.header.totals} />

// 変更後
{/* リングに統合済み - 別途表示不要 */}
```

## 再発防止

### 設計原則
1. **情報の一元化**: 同じ情報を複数の形式で表示しない
2. **視覚的ヒエラルキー**: 重要な情報は画面上部に配置
3. **プログレッシブディスクロージャー**: 詳細情報は必要に応じてドリルダウン

### レビュープロセス
- 新規UIコンポーネント追加時は、既存コンポーネントとの情報重複をチェック
- デザインレビューで視覚的優先順位を確認
- ユーザビリティテストで認知負荷を評価

## 備考

- SummaryHeaderコンポーネントファイル自体は削除していない
  - 他の画面で使用される可能性を考慮
  - 将来的に必要になった場合の復元容易性を担保
- パーセンテージ表示追加機能（percentage prop）は実装したが、最終的に使用されなかった
